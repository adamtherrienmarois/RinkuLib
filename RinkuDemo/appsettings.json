{
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft.AspNetCore": "Warning"
        }
    },
    "ConnStr": "Data Source=chinook.db",
    "AllowedHosts": "*",
    "SQLStrings": {
        "Artist": {
            "Create": "INSERT INTO Artist (Name) VALUES (@Name) RETURNING ArtistId AS ID;",
            "Read": "SELECT ArtistId AS ID, Name FROM Artists WHERE ArtistId = ?@ID;",
            "Update": "UPDATE Artist SET Name = @Name WHERE ArtistId = @ID;",
            "Delete": "DELETE FROM Track WHERE AlbumID IN (SELECT AlbumId FROM Album WHERE ArtistId = @ID); DELETE FROM Album WHERE ArtistId = @ID; DELETE FROM Artist WHERE ArtistId = @ID;"
        },
        "Album": {
            "Create": "INSERT INTO Album (Title, ArtistId) VALUES (@Title, @ArtistID) RETURNING AlbumId AS ID;",
            "Read": "SELECT a.AlbumId AS ID, a.Title, /*AllJ*/art.ArtistId&, art.Name AS ArtistName FROM Albums a /*AllJ*/LEFT JOIN Artists art ON a.ArtistId = art.ArtistId WHERE a.AlbumId = ?@ID AND a.ArtistID = ?@ArtistID;",
            "Update": "UPDATE Album SET Title = @Title, ArtistId = @ArtistID WHERE AlbumId = @ID;",
            "Delete": "DELETE FROM Album WHERE AlbumId = @ID;"
        },
        "Track": {
            "Create": "INSERT INTO Track (Name, AlbumId, MediaTypeId, GenreId, UnitPrice, Milliseconds) VALUES (@Name, @AlbumID, @MediaTypeID, @GenreID, @UnitPrice, @Milliseconds) RETURNING TrackId AS ID;",
            "Read": "SELECT t.TrackId AS ID, t.Name, t.UnitPrice, t.Milliseconds, t.Bytes, /*AllJ*/a.AlbumId&, a.Title AS AlbumTitle, m.MediaTypeId, m.Name AS MediaTypeName, g.GenreId, g.Name AS GenreName FROM Tracks t /*AllJ*/LEFT JOIN Albums a ON t.AlbumId = a.AlbumId LEFT JOIN Media_Types m ON t.MediaTypeId = m.MediaTypeId LEFT JOIN Genres g ON t.GenreId = g.GenreId WHERE t.TrackId = ?@ID AND t.AlbumID = ?@AlbumID AND UnitPrice >= ?@MinPrice;",
            "Update": "UPDATE Track SET Name = @Name, AlbumId = @AlbumID, MediaTypeId = @MediaTypeID, GenreId = @GenreID, UnitPrice = @UnitPrice, Milliseconds = @Milliseconds WHERE TrackId = @ID;",
            "Delete": "DELETE FROM Track WHERE TrackId = @ID;"
        },
        "Genre": {
            "Create": "INSERT INTO Genre (Name) VALUES (@Name) RETURNING GenreId AS ID;",
            "Read": "SELECT GenreId AS ID, Name FROM Genre WHERE GenreId = @ID;",
            "Update": "UPDATE Genre SET Name = @Name WHERE GenreId = @ID;",
            "Delete": "DELETE FROM Genre WHERE GenreId = @ID;"
        },
        "MediaType": {
            "Create": "INSERT INTO MediaType (Name) VALUES (@Name) RETURNING MediaTypeId AS ID;",
            "Read": "SELECT MediaTypeId AS ID, Name FROM MediaType WHERE MediaTypeId = @ID;",
            "Update": "UPDATE MediaType SET Name = @Name WHERE MediaTypeId = @ID;",
            "Delete": "DELETE FROM MediaType WHERE MediaTypeId = @ID;"
        },
        "Employee": {
            "Create": "INSERT INTO Employee (LastName, FirstName, Title, ReportsTo) VALUES (@LastName, @FirstName, @Title, @ManagerID) RETURNING EmployeeId AS ID;",
            "Read": "SELECT e.EmployeeId AS ID, e.LastName, e.FirstName, e.Title, m.EmployeeId AS ManagerId, m.LastName AS ManagerLastName, m.FirstName AS ManagerFirstName FROM Employee e LEFT JOIN Employee m ON e.ReportsTo = m.EmployeeId WHERE e.EmployeeId = @ID;",
            "Update": "UPDATE Employee SET LastName = @LastName, FirstName = @FirstName, Title = @Title, ReportsTo = @ManagerID WHERE EmployeeId = @ID;",
            "Delete": "DELETE FROM Employee WHERE EmployeeId = @ID;"
        },
        "Customer": {
            "Create": "INSERT INTO Customer (FirstName, LastName, Email, SupportRepId) VALUES (@FirstName, @LastName, @Email, @SupportRepID) RETURNING CustomerId AS ID;",
            "Read": "SELECT c.CustomerId AS ID, c.FirstName, c.LastName, c.Email, e.EmployeeId AS SupportRepId, e.FirstName AS SupportRepFirstName, e.LastName AS SupportRepLastName FROM Customer c LEFT JOIN Employee e ON c.SupportRepId = e.EmployeeId WHERE c.CustomerId = @ID;",
            "Update": "UPDATE Customer SET FirstName = @FirstName, LastName = @LastName, Email = @Email, SupportRepId = @SupportRepID WHERE CustomerId = @ID;",
            "Delete": "DELETE FROM Customer WHERE CustomerId = @ID;"
        },
        "Invoice": {
            "Create": "INSERT INTO Invoice (CustomerId, InvoiceDate, Total) VALUES (@CustomerID, @InvoiceDate, @Total) RETURNING InvoiceId AS ID;",
            "Read": "SELECT i.InvoiceId AS ID, i.InvoiceDate, i.Total, c.CustomerId, c.FirstName AS CustomerFirstName, c.LastName AS CustomerLastName, c.Email AS CustomerEmail FROM Invoice i LEFT JOIN Customer c ON i.CustomerId = c.CustomerId WHERE i.InvoiceId = @ID;",
            "Update": "UPDATE Invoice SET CustomerId = @CustomerID, InvoiceDate = @InvoiceDate, Total = @Total WHERE InvoiceId = @ID;",
            "Delete": "DELETE FROM Invoice WHERE InvoiceId = @ID;"
        },
        "InvoiceLine": {
            "Create": "INSERT INTO InvoiceLine (InvoiceId, TrackId, UnitPrice, Quantity) VALUES (@InvoiceID, @TrackID, @UnitPrice, @Quantity) RETURNING InvoiceLineId AS ID;",
            "Read": "SELECT il.InvoiceLineId AS ID, il.UnitPrice, il.Quantity, i.InvoiceId, i.InvoiceDate, t.TrackId, t.Name AS TrackName FROM InvoiceLine il LEFT JOIN Invoice i ON il.InvoiceId = i.InvoiceId LEFT JOIN Track t ON il.TrackId = t.TrackId WHERE il.InvoiceLineId = @ID;",
            "Update": "UPDATE InvoiceLine SET InvoiceId = @InvoiceID, TrackId = @TrackID, UnitPrice = @UnitPrice, Quantity = @Quantity WHERE InvoiceLineId = @ID;",
            "Delete": "DELETE FROM InvoiceLine WHERE InvoiceLineId = @ID;"
        }
    }
}
